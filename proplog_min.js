(function(C){function E(y){var n=(new Date).getTime(),n=String(n-u);0===n.length?n="000":1===n.length?n="00"+n:2===n.length&&(n="0"+n);A("<div>"+n+": "+y+"</div>","process")}function D(u){A(u,"result")}function A(u,n){var b=document.getElementById(n),a=document.createElement("div");for(a.innerHTML=u;a.firstChild;)b.appendChild(a.firstChild)}var u=0;C.solve=function(y,n,b){C.clear_output();window.setTimeout(function(){a:{var a=y,h,r,x;u=(new Date).getTime();E("starting to parse");a=proplog_parse.parse(a); h=[];if("number"==typeof a[0])E("parsed, detected dimacs syntax"),r=a,a=r.shift();else if("error"===a[0]){E("Syntax error: "+a[0]);D("Syntax error: "+a[0]);break a}else E("parsed, detected formula syntax"),h=proplog_convert.formula_to_cnf(a),h=proplog_convert.rename_vars_in_clauses(h),a=h[0],r=h[1],h=h[2];E("got "+r.length+" clauses, max var "+a);"dpll_better"==n&&(x=proplog_dpll.dpll(r,a,b,h));"dpll_old"==n?x=proplog_olddpll.olddpll(r,a,b,h):"dpll_naive"==n?x=proplog_naivedpll.naivedpll(r,a,b,h): "truth_table_naive"==n?x=proplog_searchtable.searchtable(r,a,"leaves",b,h):"truth_table_better"==n&&(x=proplog_searchtable.searchtable(r,a,"nodes",b,h));"resolution_naive"==n?x=proplog_naiveres.naiveres(r,a,b,h):"resolution_better"==n&&(x=proplog_res.resolution(r,a,b,h));E(x[1]);if(0!=x[0]){if("resolution_naive"==n||"resolution_better"==n){if(a="Clause set is <b>true</b> for some assignment of values to variables.",1!=x[0]&&0<x[0].length)for(a+=" A partial suitable assignment is: ",r=0;r<x[0].length;r++)a+= x[0][r]+" "}else for(a="Clause set is <b>true</b> if we assign values to variables as: ",r=0;r<x[0].length;r++)a+=x[0][r]+" ";D(a)}else D("Clause set is <b>false</b> for all possible assignments to variables.")}},100)};C.build=function(y,n){C.clear_output();window.setTimeout(function(){var b;u=(new Date).getTime();E("starting to parse");y?(b=proplog_parse.parse(y),"error"===b[0]?D("Parse error: "+b[1]):("parse_tree"==n?("number"===typeof b[0]?(E("parsed, detected dimacs syntax"),b.shift()):E("parsed, detected formula syntax"), b=JSON.stringify(b),b=b.replace(/"/g,"")):"truth_table"==n?("number"===typeof b[0]?E("parsed, detected dimacs syntax"):E("parsed, detected formula syntax"),b=proplog_convert.print_truthtable(b)):"cnf"==n&&("number"===typeof b[0]?(E("parsed, detected dimacs syntax"),b.shift()):(E("detected formula syntax"),b=proplog_convert.formula_to_cnf(b)),b=proplog_convert.parsed_print(b,[])),E("finished"),D("<tt>"+b.replace(/\n/g,"<br>")+"</tt>"))):D("No input.")},100)};C.clear_output=function(){var u=document.getElementById("process"); u.innerHTML="";u=document.getElementById("result");u.innerHTML=""}})(this.proplog_ui={});(function(C){function E(b,a){var h,r,x;a=u(b,a);h=!1;A(b,a,"-")?(h=!0,a++):A(b,a,"~")&&(h=!0,a++);x=D(b,a);if(n(x))return x;r=x[0];a=x[1];h&&(r=["-",r]);for(a=u(b,a);;){h=null;!0===A(b,a,"&")?(h="&",a++):!0===A(b,a,"and")?(h="&",a+=3):!0===A(b,a,"+")?(h="+",a++):!0===A(b,a,"xor")?(h="+",a+=3):!0===A(b,a,"|")?(h="V",a++):!0===A(b,a,"v")?(h="V",a++):!0===A(b,a,"V")?(h="V",a++):!0===A(b,a,"or")?(h="V",a+=3):!0===A(b,a,"->")?(h="->",a+=2):!0===A(b,a,"=>")?(h="->",a+=2):!0===A(b,a,"<->")?(h="<->",a+=3): !0===A(b,a,"<=>")&&(h="<->",a+=3);if(null===h)break;x=D(b,a);if(n(x))return x;r=[h,r,x[0]];a=x[1];a=u(b,a);if(a>=b.length)break}return[r,a]}function D(b,a){var h,r,x,d;a=u(b,a);d=!1;A(b,a,"-")?(d=!0,a++,a=u(b,a)):A(b,a,"~")&&(d=!0,a++,a=u(b,a));for(x=a;;)if(h=b.charAt(x),r=b.charCodeAt(x),x<b.length&&(48<=r&&57>=r||65<=r&&122>=r))x++;else{if(x>a)return h=b.substring(a,x),d?[["-",h],x]:[h,x];break}if("("===h){a++;x=E(b,a);if(n(x))return x;h=x[0];a=x[1];a=u(b,a);if(")"!==b.charAt(a))return y("right parenthesis missing"); a++;return d?[["-",h],a]:[h,a]}return")"===h?y("extra right parenthesis at "+b.substring(a)):y("unexpected text "+h+" encountered at "+b.substring(a))}function A(b,a,h){return 1===h.length?b.charAt(a)===h?!0:!1:b.substr(a,h.length)===h?!0:!1}function u(b,a){for(var h;a<b.length;)if(h=b.charAt(a)," "===h||"\t"===h||"\n"===h||"\r"===h)a++;else break;return a}function y(b){return["error",b]}function n(b){return"string"!==typeof b&&"error"===b[0]?!0:!1}C.parse=function(b){var a;a=C.parse_dimacs(b);return 0!== a[0]&&1<a.length&&0<a[1].length?a:a=C.parse_formula(b)};C.parse_tree=function(b){var a,h;b=C.parse(b);if(n(b))return"syntax error: "+b[1];if("number"==typeof b[0]){h=["&"];for(a=1;a<b.length;a++)1<b[a].length?h.push(["V"].concat(b[a])):1===b[a].length&&h.push(b[a][0]);return JSON.stringify(h)}return JSON.stringify(b)};C.parse_dimacs=function(b){var a,h,n,x,d,t,e,f;a=[];f=0;h=b.split("\n");for(x=0;x<h.length;x++)if((n=h[x].trim())&&0!==n.lastIndexOf("c",0)&&0!==n.lastIndexOf("p",0)){b=[];n=n.split(" "); for(d=0;d<n.length;d++)if(t=n[d])if(t=parseInt(t),!isNaN(t)){if(0===t)break;e=t;0>e&&(e*=-1);e>f&&(f=e);b.push(t)}b&&a.push(b)}a.unshift(f);return a};C.parse_formula=function(b){var a,h,r;a=E(b,0);if(n(a))return a;h=a[0];r=a[1];a=u(b,r);return a<b.length?y("remaining text at "+b.substring(r)):h}})(this.proplog_parse={});(function(C){function E(d,t,e){var f,l;f=typeof d;if(d)if("number"===f)e=d,0>d&&(r.push("-"),h++,e=0-d),(f=t[e])&&(e=f),d=String(e),r.push(d),h+=d.length;else if("string"===f)r.push(d),h+=d.length;else if(!(2>d.length))if(f=d[0],"-"===f)r.push("-"),h++,E(d[1],t,e+1);else{0<e&&(r.push("("),h+=1);for(l=1;l<d.length;l++)E(d[l],t,e+1),l<d.length-1&&(r.push(" "+f+" "),h+=f.length+2);0<e&&(r.push(")"),h+=1)}}function D(d,t,e){var f,l,g;for(f=1;f<d.length;f++)l=d[f],g=typeof l,"number"===g||"string"===g? e[l]?d[f]=e[l]:(a++,e[l]=a,t[a]=l,d[f]=a):D(l,t,e)}function A(d,t){var e,f;e=typeof d;if("number"===e||"string"===e)return t?d:"number"===e?0-d:"string"===e&&0===d.lastIndexOf("-",0)?d.substring(1):["-",d];if(2>d.length)return["error","op must have some arguments"];e=d[0];if("-"===e)return A(d[1],!t);if("&"===e||"V"===e){e=t?[e]:"&"===e?["V"]:["&"];for(f=1;f<d.length;f++)e.push(A(d[f],t));return e}if("->"===e){e=t?["V"]:["&"];for(f=1;f<d.length-1;f++)e.push(A(d[f],!t));e.push(A(d[d.length-1],t)); return e}return"+"===e?3!==d.length?["error","+ must have two arguments"]:e=t?["V",["&",A(d[1],!1),A(d[2],!0)],["&",A(d[1],!0),A(d[2],!1)]]:["V",["&",A(d[1],!0),A(d[2],!0)],["&",A(d[1],!1),A(d[2],!1)]]:"<->"===e?3!==d.length?["error","<-> must have two arguments"]:e=t?["&",["V",A(d[1],!1),A(d[2],!0)],["V",A(d[1],!0),A(d[2],!1)]]:["V",["&",A(d[1],!0),A(d[2],!1)],["&",A(d[1],!1),A(d[2],!0)]]:"error"}function u(d){var t,e,f,l,g;f=typeof d;if("number"===f||"string"===f)return d;t=d[0];if("-"===t)return d; if("&"===t){t=["&"];for(e=1;e<d.length;e++)if(l=u(d[e]),f=typeof l,"number"===f||"string"===f||"-"===l[0]||"V"===l[0])t.push(l);else for(f=1;f<l.length;f++)t.push(l[f]);return t}if("V"===t){g=["V"];t=[];for(e=1;e<d.length;e++)if(l=u(d[e]),f=typeof l,"number"===f||"string"===f||"-"===l[0])g.push(l);else if("&"===l[0])t.push(l);else for(f=1;f<l.length;f++)g.push(l[f]);if(0===t.length)return g;var c,p;c=[g];g=[];for(d=0;d<t.length;d++){f=t[d];g=[];for(e=1;e<f.length;e++)for(l=0;l<c.length;l++)p=c[l].slice(), p.push(f[e]),g.push(p);c=g}f=g;t=["&"];for(e=0;e<f.length;e++)t.push(u(f[e]));return t}return["error","op not allowed"]}function y(d,t,e){var f,l,g,c;f=typeof d;if(d){if("number"===f)return e=d,0>d&&(r.push("-"),h++,e=0-d),(f=t[e])&&(e=f),t=String(e),r.push(t),h+=t.length,d;if("string"===f)return r.push(d),h+=d.length,d;if(2>d.length)return null;f=d[0];if("-"===f)return r.push("-"),c=h,h++,["-",c,y(d[1],t,e+1)];g=[f,0];0<e&&(r.push("("),h+=1);for(l=1;l<d.length;l++)g.push(y(d[l],t,e+1)),l<d.length- 1&&(r.push(" "+f+" "),c=h+1,h+=f.length+2);0<e&&(r.push(")"),h+=1);g[1]=c;return g}}function n(d,t,e){var f,l,g,c,p;if("number"===typeof d)return t[d];f=d[0];l=d[1];if("-"===f)return g=n(d[2],t,e+1),p=1===g?0:1,x[l]=b(p,e),p;if("V"===f){p=0;for(f=2;f<d.length;f++)g=n(d[f],t,e+1),1===g&&(p=1);x[l]=b(p,e);return p}if("&"===f){p=1;for(f=2;f<d.length;f++)g=n(d[f],t,e+1),0===g&&(p=0);x[l]=b(p,e);return p}if("->"===f){p=0;for(f=2;f<d.length-1;f++)g=n(d[f],t),0===g&&(p=1);g=n(d[d.length-1],t,e+1);1===g&& (p=1);x[l]=b(p,e);return p}if("<->"===f){p=1;g=n(d[2],t,e+1);for(f=3;f<d.length;f++)c=n(d[f],t,e+1),g!==c&&(p=0);x[l]=b(p,e);return p}return"+"===f?(g=n(d[2],t,e+1),c=n(d[3],t,e+1),g+=c,p=1===g?1:0,x[l]=b(p,e),p):-1}function b(d,t){return 0<t?String(d):"<b>"+String(d)+"</b>"}var a=0,h=0,r=[],x=[];C.parsed_print=function(d,t){var e;e=typeof d;if(!d)return"";if("number"===e||"string"===e)return String(d);if(1>d.length)return"";if("string"===typeof d[0])return r=[],h=0,E(d,t,0),e=r.join(""),e=e.replace(/\"/g, "");var f,l,g,c,p,a;r=[];for(e=h=0;e<d.length;e++){l=d[e];1!=l.length&&(r.push("("),h++);for(f=0;f<l.length;f++)g=l[f],p="",a=typeof g,"string"===a?c=String(g):"number"===a?(0>g?(c=0-g,p="-"):c=g,c=t[c]?t[c]:String(c)):"-"===g[0]&&(c=g[1],p="-"),r.push(p+c),h+=p.length+c.length,f<l.length-1&&(r.push(" V "),h+=3);1!=f&&(r.push(")"),h++);e<d.length-1&&(r.push(" & "),h+=3);r.push("\n");h++}e=r.join("");return e=e.replace(/\"/g,"")};C.rename_vars_in_clauses=function(d){var t={},e=[],f,l,g,c,p,a=0;for(f= 0;f<d.length;f++)for(g=d[f],l=0;l<g.length;l++){c=g[l];p=!1;if("string"===typeof c)0===c.lastIndexOf("-",0)&&(c=c.substring(1),p=!0);else if("number"===typeof c)0>c&&(c=0-c,p=!0);else if(2===c.length&&"-"===c[0])c=c[1],p=!0;else return[0,"error: not a clause list",[]];t[c]?c=t[c]:(a++,t[c]=a,e[a]=c,c=a);g[l]=p?0-c:c}return[a,d,e]};C.rename_vars_in_formula=function(d){var t=[];a=0;if("number"===typeof d||"string"===typeof d)return[1,1,[0,d]];D(d,t,{});return[a,d,t]};C.formula_to_cnf=function(d){var a, e,f,l;d=A(d,!0);if("error"===d)return d;d=u(d);a=typeof d;if("string"===a||"number"===a||"-"===d[0])return[[d]];if("V"===d[0])return d.shift(),[d];e=[];for(f=1;f<d.length;f++)l=d[f],a=typeof l,"string"===a||"number"===a||"-"===l[0]?e.push([l]):(l.shift(),e.push(l));return e};C.print_truthtable=function(d){var a,e;if(!d)return"";"number"===typeof d[0]?(e="dpll",d.shift(),a=C.rename_vars_in_clauses(d)):(e="formula",a=C.rename_vars_in_formula(d));d=a[0];var f=a[1];a=a[2];var l,g,c,p,F,v,b,M;b=new Int32Array(d+ 1);M=[];g=[];r=[];h=0;if("dpll"===e)for(l="value",p=1;p<a.length;p++)a[p]=String(a[p]);else for(f=y(f,a,0),l=r.join(""),l=l.replace(/\"/g,""),x=[],p=0;p<l.length;p++)x.push("&nbsp;");for(F=1;F<=d;F++)g.push(a[F]);v=g.join(" ")+" | "+l;M.push(v);g="";for(F=0;F<v.length;F++)g+="&ndash;";M.push(g);l=Math.pow(2,d);if(1024<l)d="Table would contain "+l+" rows: our printing limit is 1024 rows.";else{for(p=0;p<l;p++){g=[];for(c=1;c<=d;c++){F=p>>>d-c;F%=2;b[c]=F?1:0;g.push(b[c]);v="";for(F=0;F<a[c].length;F++)v+= "&nbsp;";g.push(v)}if("dpll"==e){b:{var k=v=F=c=void 0,m=void 0,u=m=void 0;for(c=0;c<f.length;c++){v=f[c];k=!1;for(F=0;F<v.length;F++)if(m=v[F],0>m?(m=0-m,u=0):u=1,b[m]==u){k=!0;break}if(!k){c="0";break b}}c="1"}v=c}else n(f,b,0),v=x.join("");g.push("&#124; ");g.push(v);M.push(g.join(""))}d=M.join("\n")}return d}})(this.proplog_convert={});(function(C){function E(D){var A,u,y,n;if(0>D)return[];if(1==D)return[[1],[-1]];A=E(D-1);y=[];for(n=0;n<A.length;n++)u=A[n].slice(),u.push(D),y.push(u),u=A[n].slice(),u.push(0-D),y.push(u);return y}C.generate_problem=function(D,A){var u,y,n;if(!D)return"";D=parseInt(D);if(isNaN(D))return"";if("all_combinations"===A)u=E(D);else if("small_unsat"===A){u=D;var b;y=[];n=[];for(b=1;b<=u;b++)n.push(b);y.push(n);for(b=1;b<=u;b++)y.push([0-b]);u=y}else if("random_3-sat"===A){u=D;var a,h,r,x;if(2>u)u=[];else{b= 4*u;y=[];for(a=0;a<b;a++){n=[];for(h=0;3>h;h++)r=Math.random(),r=.5>r?-1:1,x=Math.random(),x=Math.floor(x*u+1),0>n.indexOf(r*x)&&n.push(r*x);y.push(n)}u=y}}else u=[];y="";for(n=0;n<u.length;n++)y=y+u[n].join(" ")+"\n";return y}})(this.proplog_generate={});(function(C){function E(g,c,e,a,v,b,h,k){var m,r;c>f&&(f=c);if(0!==g){if(n){r="assigning var ";for(m=0;m<g;m++)r+=y(k[m])+" ";u(c,r)}a:{var q,w,z,A,H,L,I,J,C,O,P,Q;x++;Q="";for(m=L=0;m<g;m++)w=k[m],0>w?a[0-w]=-1:a[w]=1;for(;L<g;)for(m=k[L++],r=0-m,I=0>m?b[r]:h[m],J=I[0],m=1;m<=J;m++){z=I[m];C=!0;P=O=0;for(q=2;q<z.length;q++)if(w=z[q],0>w?(A=a[0-w],H=-1):(A=a[w],H=1),0===A){if(0<O){z[0]===r?(w===z[1]&&(w=P),z[0]=w):(w===z[0]&&(w=P),z[1]=w);q=0>w?h[0-w]:b[w];q[0]++;q[q[0]]=z;I[m]=I[J];I[0]--;J--;m--; C=!1;break}O++;P=w}else if(A===H){C=!1;break}if(C){if(0===O){n&&u(c,"value is false");for(q=0;q<g;q++)w=k[q],0>w?a[0-w]=0:a[w]=0;g=2*Math.pow(x,1.5);for(q=2;q<z.length;q++)w=z[q],0>w?l[0-w]+=g:l[w]+=g;g=!1;break a}t++;k[g]=P;g++;0>P?(z=0-P,H=-1):(z=P,H=1);a[z]=H;n&&(Q+=P+" ")}}n&&(u(c,"value is undetermined"),0<Q.length&&u(c,"derived units "+Q));if(1===g)g=k[0];else{r=new Int32Array(g);for(m=0;m<g;m++)r[m]=k[m];g=r}}}else n&&u(c,"search called without assigning vars"),g=0;if(!0===g)return D(a),!0; if(!1===g)return!1;I=l;d++;Q=-1E3;L=0;for(m=1;m<a.length;m++)0===a[m]&&(r=I[m],r>=Q&&(Q=r,L=m));m=L;if(0===m)return D(a),!0;n&&u(c,"splitting variable "+y(m));k[0]=m;if(r=E(1,c+1,e,a,v,b,h,k))return!0;k[0]=0-m;if(r=E(1,c+1,e,a,v,b,h,k))return!0;if("number"===typeof g)0>g?a[0-g]=0:0!==g&&(a[g]=0);else for(m=0;m<g.length;m++)c=g[m],0>c?a[0-c]=0:a[c]=0;return!1}function D(g){var c;for(c=1;c<g.length;c++)0!==g[c]&&r.push(y(c*g[c]))}function A(g,c,d,a,l,f){var b,k,m,h,q,r,x;g=g.sort(function(c,g){return c.length- g.length});d=[];for(a=0;a<g.length;a++){l=g[a];q=!1;x=r=0;for(f=2;f<l.length;f++){k=l[f];m=0-k;0>k?(b=0-k,h=-1):(b=k,h=1);if(c[b]===h){q=!0;break}if(c[b]===0-h)l[f]=0,r++;else{for(b=2;b<f;b++){if(l[b]===m){q=!0;break}l[b]===k&&(l[f]=0,x++)}if(q)break}}if(q)e++;else{f=l.length-(r+x);if(2===f)return!1;if(3===f){t++;for(b=2;b<l.length;b++)if(0!==l[b]){k=l[b];break}0>k?(b=0-k,h=-1):(b=k,h=1);c[b]=h}else{if(f!==l.length){m=new Int32Array(f);m[0]=l[0];m[1]=l[1];b=0;for(f=2;f<l.length;f++)0!==l[f]&&(m[b]= l[f],b++);l=m}d.push(l)}}}if(n){g="units detected or derived during preprocessing: ";for(a=1;a<c.length;a++)0!==c[a]&&(g+=" "+a);u(0,g);console.log(g)}return d}function u(g,c){var d,l="";if(n&&"console"==b){for(d=0;d<g;d++)l+=" ";console.log(l+c)}else if(n&&"text"==b){for(d=0;d<g;d++)l+=" ";a.push(l+c)}else if(n&&"html"==b){for(d=0;d<g;d++)l+="&nbsp;";a.push("<div><tt>"+l+"</tt>"+c+"</div>")}}function y(g){var c,d;return g&&h&&0<h.length?(0>g?(c=0-g,d="-"):(c=g,d=""),h.length>c&&h[c]?d+h[c]:String(g)): String(g)}var n=!1,b="text",a=[],h=[],r=[],x=0,d=0,t=0,e=0,f=0,l;C.dpll=function(g,c,p,F){var v,B,M,k;p?(n=!0,b=p):n=!1;h=F?F:!1;f=e=t=d=x=0;a=[];r=[];p=g;var m;c=0;k=[];for(F=0;F<p.length;F++){B=p[F];g=B.length;M=new Int32Array(g+2);M[0]=0;for(v=M[1]=0;v<g;v++)m=B[v],M[v+2]=m,m=0>m?0-m:m,m>c&&(c=m);k.push(M)}p=[c,k];c=p[0];g=p[1];M=new Int32Array(c+1);p=new Int32Array(c+1);for(k=0;k<=c;k++)p[k]=0;F=new Int32Array(c+1);v=Array(c+1);for(k=0;k<=c;k++)v[k]=[];B=Array(c+1);for(k=0;k<=c;k++)B[k]=[];l= Array(c+1);for(k=0;k<=c;k++)l[k]=1;g=A(g,p,F,v,B,M);if(!1===g)return n&&a.push("contradiction found during simplification"),[!1,a.join("\r\n")];if(0===g.length)return D(p),n&&a.push("assignment found during simplification"),[r,a.join("\r\n")];var K,q,w,z;for(c=0;c<g.length;c++)for(m=g[c],K=m.length,k=2;k<K;k++)q=m[k],0>q?(q=0-q,w=-1):w=1,z=p[q],0===z&&(z=F[q],0===z?F[q]=w:z===0-w?F[q]=2:2<=z&&(5>K?z=20:6>K?z=15:(z=10-(K-2),0>z&&(z=1)),F[q]+=z));k=[];for(c=m=1;c<F.length;c++)z=F[c],2>z?(k.push(c), p[c]=0>z?-1:1,l[c]=0):0!==p[c]?l[c]=0:(l[c]=F[c],l[c]>m&&(m=l[c]));if(0<k.length){if(n){m="pure vars eliminated: ";for(c=0;c<k.length;c++)m+=y(k[c])+" ";u(0,m)}K=[];for(c=0;c<g.length;c++){m=g[c];z=!1;for(k=2;k<m.length;k++)if(q=m[k],q=0>q?0-q:q,0===l[q]){e++;z=!0;break}z||K.push(m)}g=K}if(n){m="initial variable activities: ";for(c=1;c<l.length;c++)m+=y(c)+":"+l[c]+" ";u(0,m)}if(0===g.length)return D(p),n&&a.push("assignment found during pure literal elimination"),[r,a.join("\r\n")];c=g;for(k=0;k< c.length;k++)for(K=c[k],q=0,m=2;m<K.length;m++)z=K[m],w=0>z?B[0-z]:v[z],2>q?(K[q]=z,q++,w.unshift(K)):w.push(0);for(k=1;k<B.length;k++){w=B[k];for(m=0;m<w.length&&0!==w[m];m++);B[k].unshift(m);w=v[k];for(m=0;m<w.length&&0!==w[m];m++);v[k].unshift(m)}p=E(0,0,g,p,F,v,B,M);F="search finished: unit propagations count is "+x;F+=", units derived count is "+t;F+=", max depth is "+f;a.push(F);return p?[r,a.join("\r\n")]:[!1,a.join("\r\n")]}})(this.proplog_dpll={});(function(C){function E(d,g,c,a,b,h,r,M,k){var m;b>f&&(f=b);if(0!==c)a:{n&&u(b,"assigning var "+y(c)+" to "+a),k[0]=c*a,c=1;var K,q,w,z,G,H,C,I,J,N;x++;N="";for(a=z=0;a<c;a++)q=k[a],0>q?g[0-q]=-1:g[q]=1;for(;z<c;)for(q=k[z++],G=0>q?r[0-q]:M[q],a=0;a<G.length;a++){H=G[a];C=!0;for(K=J=I=0;K<H.length;K++)if(q=H[K],0>q?(w=g[0-q],m=-1):(w=g[q],m=1),0===w){if(0<I){C=!1;break}I++;J=q}else if(w===m){C=!1;break}if(C){if(0===I){n&&u(b,"value is false");for(K=0;K<c;K++)q=k[K],0>q?g[0-q]=0:g[q]=0;c=!1;break a}t++; k[c]=J;c++;0>J?(K=0-J,m=-1):(K=J,m=1);g[K]=m;n&&(N+=J+" ")}}n&&(u(b,"value is undetermined"),0<N.length&&u(b,"derived units "+N));if(1===c)c=k[0];else{m=new Int32Array(c);for(a=0;a<c;a++)m[a]=k[a];c=m}}else n&&u(b,"search called without assigning a var before"),c=0;if(!0===c)return A(g),!0;if(!1===c)return!1;a=D(d,g,h);if(0===a)return A(g),!0;if("number"!==typeof a){e++;a=a[0];0>a?(a=0-a,m=-1):m=1;n&&u(b,"pure variable "+y(a)+", sign "+m);if(E(d,g,a,m,b+1,h,r,M,k))return!0;if("number"===typeof c)0> c?g[0-c]=0:0!==c&&(g[c]=0);else for(b=0;b<c.length;b++)d=c[b],0>d?g[0-d]=0:g[d]=0;return!1}n&&u(b,"splitting variable "+y(a));n&&u(b,"splitting variable "+y(a));if((m=E(d,g,a,1,b+1,h,r,M,k))||(m=E(d,g,a,-1,b+1,h,r,M,k)))return!0;if("number"===typeof c)0>c?g[0-c]=0:0!==c&&(g[c]=0);else for(b=0;b<c.length;b++)d=c[b],0>d?g[0-d]=0:g[d]=0;return!1}function D(a,g,c){var e,f,b,t,h,k,m,r,q;d++;for(e=0;e<c.length;e++)c[e]=0;for(e=0;e<a.length;e++){m=a[e];h=0;q=r=m.length;for(f=0;f<r;f++)if(b=m[f],0>b?(b=0- b,k=-1):k=1,t=g[b],t===k){h=1;break}else t===0-k&&q--;if(0===h&&0<q)for(f=0;f<r;f++)b=m[f],0>b?(b=0-b,k=-1):k=1,t=g[b],0===t&&(h=c[b],0===h?c[b]=k:h===0-k?c[b]=2:2<=h&&(3>q?k=20:4>q?k=15:(k=10-q,0>k&&(k=1)),c[b]+=k))}b=k=0;a=[];for(e=1;e<c.length;e++)h=c[e],0!==h&&(2>h&&0===g[e]&&a.push(h*e),h>k&&0===g[e]&&(k=h,b=e));if(0!==a.length)return a;if(0>b)return 0-b;if(0<b)return b;for(e=1;e<g.length;e++)if(0===g[e])return e;return 0}function A(a){var d;for(d=1;d<a.length;d++)0!==a[d]&&r.push(y(d*a[d]))} function u(d,g){var c,e="";if(n&&"console"==b){for(c=0;c<d;c++)e+=" ";console.log(e+g)}else if(n&&"text"==b){for(c=0;c<d;c++)e+=" ";a.push(e+g)}else if(n&&"html"==b){for(c=0;c<d;c++)e+="&nbsp;";a.push("<div><tt>"+e+"</tt>"+g+"</div>")}}function y(a){var d,c;return a&&h&&0<h.length?(0>a?(d=0-a,c="-"):(d=a,c=""),h.length>d&&h[d]?c+h[d]:String(a)):String(a)}var n=!1,b="text",a=[],h=[],r=[],x=0,d=0,t=0,e=0,f=0;C.olddpll=function(l,g,c,p){var u,v,B,A;c?(n=!0,b=c):n=!1;h=p?p:!1;f=e=t=d=x=0;a=[];r=[];if(!g)for(u= g=0;u<l.length;u++)for(p=l[u],c=0;c<p.length;c++)v=0>p[c]?0-p[c]:p[c],v>g&&(g=v);A=new Int32Array(g+1);c=new Int32Array(g+1);for(u=0;u<=g;u++)c[u]=0;p=new Int32Array(g+1);v=Array(g+1);for(u=0;u<=g;u++)v[u]=[];B=Array(g+1);for(u=0;u<=g;u++)B[u]=[];var k,m,y,q,w,z;g=[];for(u=0;u<l.length;u++)for(y=l[u],k=0;k<y.length;k++){q=y[k];w=0-q;z=!1;for(m=0;m<k;m++)if(y[m]===w){z=!0;break}z||(0>q?B[w].push(y):v[q].push(y),g.push(y))}c=E(g,c,0,0,0,p,v,B,A);p="finished: unit propagations count is "+x;p+=", units derived count is "+ t;p+=", var selections count is "+d;p+=", pure literal count is "+e;p+=", max depth is "+f;a.push(p);return c?[r,a.join("\r\n")]:[!1,a.join("\r\n")]}})(this.proplog_olddpll={});(function(C){function E(d,b,e,f,l){var g;l>x&&(x=l);0!==e?(u&&D(l,"setting var "+A(e)+" to "+f),b[e]=f,e===b.length-1&&truth_value_leaves_count++):u&&D(l,"search called without setting a var before");a:{var c,p,n,v,B,y,k,m,C,q,w;h++;C=[];for(w="";;){m=!0;q=[];for(f=0;f<d.length;f++){v=d[f];for(g=k=y=B=0;g<v.length;g++)if(c=v[g],0>c?(p=0-c,n=-1):(p=c,n=1),p=b[p],p===n){B=1;break}else 0===p&&(y++,k=c);if(1!==B){if(0===y){u&&D(l,"value is false");for(g=0;g<C.length;g++)b[C[g]]=0;f=-1;break a}else 1=== y&&(r++,q.push(k));0!==y&&(m=!1)}}if(m){u&&D(l,"value is true");f=1;break a}if(0===q.length)break;else for(g=0;g<q.length;g++)c=q[g],0>c?(p=0-c,n=-1):(p=c,n=1),b[p]=n,C.push(p),u&&(w+=A(c)+" ")}u&&(D(l,"value is undetermined"),0<C.length&&D(l,"derived units "+w));f=C}if(1===f){for(d=1;d<b.length;d++)0!==b[d]&&a.push(A(d*b[d]));b[e]=0;return!0}if(-1===f)return b[e]=0,!1;g=0;for(e=1;e<b.length;e++)if(0===b[e]){g=e;break}if(0!==g){u&&D(l,"splitting variable "+A(g));if(E(d,b,g,1,l+1)||E(d,b,g,-1,l+1))return!0; for(e=b[g]=0;e<f.length;e++)b[f[e]]=0;return!1}console.log("Error in the satisfiable_at");show_process("Error in the satisfiable_at")}function D(a,b){var e,f="";if(u&&"console"==y){for(e=0;e<a;e++)f+=" ";console.log(f+b)}else if(u&&"text"==y){for(e=0;e<a;e++)f+=" ";n.push(f+b)}else if(u&&"html"==y){for(e=0;e<a;e++)f+="&nbsp;";n.push("<div><tt>"+f+"</tt>"+b+"</div>")}}function A(a){var h,e;return a&&b&&0<b.length?(0>a?(h=0-a,e="-"):(h=a,e=""),b.length>h&&b[h]?e+b[h]:String(a)):String(a)}var u=!1,y= "text",n=[],b=[],a=[],h=0,r=0,x=0;C.naivedpll=function(d,t,e,f){var l,g;e?(u=!0,y=e):u=!1;b=f?f:!1;x=r=h=0;n=[];a=[];if(!t)for(e=t=0;e<d.length;e++)for(l=d[e],f=0;f<l.length;f++)g=0>l[f]?0-l[f]:l[f],g>t&&(t=g);f=new Int32Array(t+1);for(e=0;e<=t;e++)f[e]=0;d=E(d,f,0,0,0);t="finished: unit propagations count is "+h;t+=", units derived count is "+r;t+=", max depth is "+x;n.push(t);return d?[a,n.join("\r\n")]:[!1,n.join("\r\n")]}})(this.proplog_naivedpll={});(function(C){function E(d,b,e,f,l){b[e]=f;e===b.length-1&&h++;u&&D(l,"setting var "+A(e)+" to "+f);if("leaves"!==x||e===b.length-1){a:{var g,c,p,n,v,B,y;r++;y=!0;for(f=0;f<d.length;f++){n=d[f];v=0;B=!0;for(g=0;g<n.length;g++)if(c=n[g],p=1,0>c&&(c*=-1,p=-1),c=b[c],c===p){v=1;break}else 0===c&&(B=!1);if(1!==v&&B){u&&D(l,"value is false");f=-1;break a}B||(y=!1)}y?(u&&D(l,"value is true"),f=1):(u&&D(l,"value is undetermined"),f=0)}if(1===f){for(d=1;d<b.length;d++)0!==b[d]&&a.push(A(d*b[d]));b[e]=0;return!0}if(-1=== f)return b[e]=0,!1}if(e<b.length-1){if(E(d,b,e+1,1,l+1)||E(d,b,e+1,-1,l+1))return b[e]=0,!0;b[e]=0;return!1}console.log("Error in the satisfiable_by_table algorithm");show_process("Error in the satisfiable_by_table algorithm")}function D(a,b){var e,f="";if(u&&"console"==y){for(e=0;e<a;e++)f+=" ";console.log(f+b)}else if(u&&"text"==y){for(e=0;e<a;e++)f+=" ";n.push(f+b)}else if(u&&"html"==y){for(e=0;e<a;e++)f+="&nbsp;";n.push("<div><tt>"+f+"</tt>"+b+"</div>")}}function A(a){var h,e;return a&&b&&0<b.length? (0>a?(h=0-a,e="-"):(h=a,e=""),b.length>h&&b[h]?e+b[h]:String(a)):String(a)}var u=!1,y="text",n=[],b=[],a=[],h=0,r=0,x="nodes";C.searchtable=function(d,t,e,f,l){var g;x=e;f?(u=!0,y=f):u=!1;b=l?l:!1;h=r=0;n=[];a=[];if(!t)for(e=t=0;e<d.length;e++)for(l=d[e],f=0;f<l.length;f++)g=0>l[f]?0-l[f]:l[f],g>t&&(t=g);f=new Int32Array(t+1);for(e=0;e<=t;e++)f[e]=0;d=E(d,f,1,1,1)||E(d,f,1,-1,1);t="finished: evaluations count is "+r;t+=", leaves count is "+h;n.push(t);return d?[a,n.join("\r\n")]:[!1,n.join("\r\n")]}})(this.proplog_searchtable= {});(function(C){function E(a,d){var b,e="";if(A&&"console"==u){for(b=0;b<a;b++)e+=" ";console.log(e+d)}else if(A&&"text"==u){for(b=0;b<a;b++)e+=" ";y.push(e+d)}else if(A&&"html"==u){for(b=0;b<a;b++)e+="&nbsp;";y.push("<div><tt>"+e+"</tt>"+d+"</div>")}}function D(a){var b,h="";if(!0===a)return"tautology";if(!a)return"empty";for(b=0;b<a.length;b++){var e;e=a[b];var f=void 0,l=void 0;e&&n&&0<n.length?(0>e?(f=0-e,l="-"):(f=e,l=""),e=n.length>f&&n[f]?l+n[f]:String(e)):e=String(e);h+=e+" "}return h}var A= !1,u="text",y=[],n=[],b=[],a=0,h=0,r=0;C.naiveres=function(x,d,t,e){var f,l,g,c,p,F,v;t?(A=!0,u=t):A=!1;n=e?e:!1;r=h=a=0;y=[];b=[];t=[];l=new Int32Array(2*d+1);for(d=!0;0<x.length;){e=x.shift();A&&E(0,"selected "+D(e));f=!1;for(g=0;g<t.length;g++){a:{c=t[g];var B=v=F=p=void 0;if(c.length>e.length)c=!1;else{for(p=0;p<c.length;p++){v=c[p];B=!1;for(F=0;F<e.length;F++)if(e[F]===v){B=!0;break}if(!B){c=!1;break a}}c=!0}}if(c){f=!0;break}}if(f)A&&E(1," was subsumed");else{a++;for(g=0;g<t.length;g++){f=t[g]; A&&E(2,"processed "+D(f));for(c=0;c<e.length;c++)for(p=e[c],F=0-p,p=0;p<f.length;p++)if(F===f[p]){h++;a:{v=e;for(var B=f,C=c,k=p,m=l,K=void 0,q=void 0,w=void 0,z=void 0,G=void 0,H=void 0,L=void 0,I=void 0,J=q=void 0,K=0,q=1;3>q;q++)for(1===q?(w=v,z=C):(w=B,z=k),G=0;G<w.length;G++)if(G!==z){L=w[G];I=0-L;J=!1;for(H=0;H<K;H++){if(m[H]===L){J=!0;break}if(m[H]===I){v=!0;break a}}J||(m[K++]=L)}if(0===K)v=!1;else{q=new Int32Array(K);for(H=0;H<K;H++)q[H]=m[H];v=q}}A&&E(4,"derived "+D(v));if(!1===v){d=!1; break}!0!==v&&(r++,x.push(v))}if(!d)break}if(!d)break;t.push(e)}}x="finished: selected clauses: "+a;x+=", generated clauses: "+h;x+=", kept clauses: "+r;y.push(x);return d?(b=!0,[b,y.join("\r\n")]):[!1,y.join("\r\n")]}})(this.proplog_naiveres={});(function(C){function E(a,b){0>a?b[0-a]=-1:b[a]=1}function D(a,b){100>a.length?b[a.length].push(a):b[99].push(a)}function A(a){var b,c;for(c=1;100>c;c++)if(b=a[c],0<b.length)return a[c].shift();return!1}function u(a,b,c,d){var e,f,h,n,k,m;for(f=n=e=0;f<a.length;f++)if(h=a[f],h!=n){0>h?(n=-1,k=0-h):(n=1,k=h);if(0!==b[k]){if(b[k]===n){if(1<a.length)return!0;d[e++]=h}}else d[e++]=h;n=h}if(0===e)return!1;for(b=0;b<c.length;b++)if(n=c[b],n.length<=e){for(f=k=0;f<n.length;f++){h=n[f];for(m=!1;k<e&&d[k]<= h;k++)if(d[k]===h){m=!0;k++;break}if(!m)break}if(m)return!0}if(e===a.length)return a;a=new Int32Array(e);for(f=0;f<e;f++)a[f]=d[f];return a}function y(b,e){var c,d="";if(a&&"console"==h){for(c=0;c<b;c++)d+=" ";console.log(d+e)}else if(a&&"text"==h){for(c=0;c<b;c++)d+=" ";r.push(d+e)}else if(a&&"html"==h){for(c=0;c<b;c++)d+="&nbsp;";r.push("<div><tt>"+d+"</tt>"+e+"</div>")}}function n(a){var b,c;return a&&x&&0<x.length?(0>a?(b=0-a,c="-"):(b=a,c=""),x.length>b&&x[b]?c+x[b]:String(a)):String(a)}function b(a){var b, c="";if(!0===a)return"tautology";if(!a)return"empty";for(b=0;b<a.length;b++)c+=n(a[b])+" ";return c}var a=!1,h="text",r=[],x=[],d=[],t=0,e=0,f=0;C.resolution=function(l,g,c,p){var C,v,B,M,k,m,K,q;c?(a=!0,h=c):a=!1;x=p?p:!1;f=e=t=0;r=[];d=[];C=[];K=new Int32Array(2*g+1);c=new Int32Array(g+1);for(v=0;v<g+1;v++)c[v]=0;p=Array(100);for(v=0;100>v;v++)p[v]=[];a&&y(0,"starting to process input unit clauses");for(v=0;v<l.length;v++)if(k=l[v],1===k.length){m=k[0];0>m?(M=-1,m=0-m):M=1;if(0!==c[m]){if(c[m]=== M)continue;y(0,"empty clause derived from "+b(k));r.push("Finished while preprocessing.");return[!1,r.join("\r\n")]}E(k[0],c);D(k,p)}a&&y(0,"input unit clauses processed, starting to process non-unit");M=!0;for(v=0;v<l.length;v++)if(k=l[v],!(2>k.length)){a:{q=B=B=m=void 0;for(m=1;m<k.length;m++)for(B=k[m],q=0-B,B=0;B<m;B++)if(k[B]===q){m=!0;break a}m=!1}if(!m){m=[];B=0;q=k.length-1;for(var w=void 0,z=void 0,G=void 0,H=void 0;;)if(25>=q-B){for(z=B+1;z<=q;z++){G=k[z];for(w=z-1;w>=B&&k[w]>G;)k[w+1]= k[w--];k[w+1]=G}if(0==m.length)break;q=m.pop();B=m.pop()}else{H=B+q>>1;w=B+1;z=q;G=k[H];k[H]=k[w];k[w]=G;k[B]>k[q]&&(G=k[B],k[B]=k[q],k[q]=G);k[w]>k[q]&&(G=k[w],k[w]=k[q],k[q]=G);k[B]>k[w]&&(G=k[B],k[B]=k[w],k[w]=G);for(H=k[w];;){do w++;while(k[w]<H);do z--;while(k[z]>H);if(z<w)break;G=k[w];k[w]=k[z];k[z]=G}k[B+1]=k[z];k[z]=H;q-w+1>=z-B?(m.push(w),m.push(q),q=z-1):(m.push(B),m.push(z-1),B=w)}k=u(k,c,[],K);if(!1===k)return a&&y(0,"empty clause derived from "+b(l[v])),r.push("Finished while preprocessing."), [!1,r.join("\r\n")];if(!0!==k&&(D(k,p),M))for(B=m=0;B<k.length;B++)if(!(0>k[B])&&(m++,1<m)){M=!1;break}}}a&&(y(0,"input non-unit clauses processed "),M?y(0,"observation: clause set is horn"):y(0,"observation: clause set is not horn"));l=Array(g+1);for(v=0;v<=g;v++)l[v]=[];M=Array(g+1);for(v=0;v<=g;v++)M[v]=[];for(g=!0;v=A(p);){a&&y(0,"selected candidate "+b(v));a:{k=c;m=l;B=M;q=K;for(var L=z=w=void 0,I=void 0,J=I=L=L=G=void 0,N=void 0,O=H=void 0,z=L=w=0;z<v.length;z++)if(G=v[z],G!=L){0>G?(L=-1,I= 0-G):(L=1,I=G);if(0!==k[I]){if(k[I]===L)if(1<v.length){v=!0;break a}else q[w++]=G}else q[w++]=G;L=G}if(0===w)v=!1;else{for(I=0;I<w;I++)for(G=q[I],O=0>G?B[0-G]:m[G],J=0;J<O.length;J++)if(N=O[J],N.length<=w){for(z=L=0;z<N.length;z++){G=N[z];for(H=!1;L<w&&q[L]<=G;L++)if(q[L]===G){H=!0;L++;break}if(!H)break}if(H){v=!0;break a}}if(w!==v.length)for(v=new Int32Array(w),z=0;z<w;z++)v[z]=q[z]}}if(!v){g=!1;break}if(!0===v)a&&y(1,"subsumed");else{a&&y(0,"preprocessed to "+b(v));t++;k=v[0];0>k?(k=0-k,k=l[k]): k=M[k];for(m=0;m<k.length;m++)if(B=k[m],!0!==B){a&&y(2,"processed "+b(B));e++;a:{q=v;for(var w=B,z=K,G=c,P=J=O=N=N=J=I=L=H=void 0,P=O=void 0,H=q.length,I=L=0;I<w.length;I++)if(0!==I)if(N=w[I],O=0-N,0>N?(J=-1,P=O):(J=1,P=N),0!==G[P]){if(G[P]===J){q=!0;break a}}else{P=!1;for(J=0;J<H;J++)if(0!==J){if(q[J]===N){P=!0;break}if(q[J]===O){q=!0;break a}}P||(z[L++]=N)}if(0===L&&2>H)q=!1;else{O=new Int32Array(H-1+L);for(N=J=I=0;I<H&&J<L;)0===I?I++:q[I]<=z[J]?O[N++]=q[I++]:O[N++]=z[J++];for(;I<H;I++)0!==I&&(O[N++]= q[I]);for(;J<L;J++)O[N++]=z[J];q=O}}if(!1===q){g=!1;break}if(!0===q)a&&y(4,"derived clause a tautology or subsumed");else{f++;1===q.length&&E(q[0],c);a&&y(4,"kept "+b(q));D(q,p);a:if(H=G=z=w=void 0,q.length>B.length)B=!1;else{for(w=z=0;w<q.length;w++){G=q[w];for(H=!1;z<B.length&&B[z]<=G;z++)if(B[z]===G){H=!0;z++;break}if(!H){B=!1;break a}}B=!0}B&&(k[m]=!0)}}if(!g)break;1===v.length&&E(v[0],c);k=C;m=l;B=void 0;B=v[0];0>B?M[0-B].push(v):m[B].push(v);k.push(v)}}p="finished: selected clauses: "+t;p+= ", generated clauses: "+e;p+=", kept clauses: "+f;r.push(p);if(g){d=[];for(v=0;v<c.length;v++)0!==c[v]&&d.push(n(v*c[v]));0==d.length&&(d=!0);return[d,r.join("\r\n")]}return[!1,r.join("\r\n")]}})(this.proplog_res={});